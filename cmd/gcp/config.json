{
    "resources":[
        {
            "type":"resource",
            "resource":"google_compute_instance",
            "config":{
                "name":"test-name",
                "machine_type":"f1-micro",
                "zone":"us-west1-a",
                "image":"debian-cloud/debian-9",
                "metadata":{
                    "key":"mingphuong:${file(\"./gpc.pub\")}"
                },
                "metadata_startup_script":"sudo apt-get update; sudo apt-get install -yq build-essential python-pip rsync; pip install flask",
                "vpc":"vpc",
                "subnet":"public-subnet-1"
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_firewall",
            "config":{
                "name":"allow-rdp",
                "network":"vpc",
                "allow":{
                    "ports":"3389",
                    "prorocol":"tcp"
                }
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_firewall",
            "config":{
                "name":"allow-ssh",
                "network":"vpc",
                "allow":{
                    "ports":"22",
                    "protocol":"tcp"
                }
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_firewall",
            "config":{
                "name":"allow-https",
                "network":"vpc",
                "allow":{
                    "ports":"80",
                    "protocol":"tcp"
                }
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_subnetwork",
            "config":{
                "name":"public-subnet-1",
                "ip_cidr_range":"10.10.1.0/24",
                "network":"vpc",
                "region":"us-west1"
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_network",
            "config":{
                "name":"vpc",
                "auto_create_subnetworks":"false",
                "routing_mode":"GLOBAL"
            }
        }
    ]
}